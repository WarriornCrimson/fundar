:root {
    --primary-color: #707AF2;
    --primary-light: #A8B3FF;
    --secondary-color: #6C757D;
    --background-color: #f8f8f8;
    --card-background: #ffffff;
    --shadow-light: 0 4px 12px rgba(0, 0, 0, 0.05);
    --gold-color: #FFB74D; 
}

body {
    font-family: 'Inter', sans-serif;
    background-color: var(--background-color);
    color: #333;
}

.main-layout {
    display: grid;
    grid-template-columns: 3fr 1fr; 
    gap: 30px;
    max-width: 1400px;
    margin: 30px auto;
    padding: 0 20px;
    margin-left: 250px;
}

.challenge-content {
    width: 58vw;
}

.banner-container {
    position: relative;
    margin-bottom: 30px;
}

.banner-image {
    width: 100%;
    height: 250px;
    object-fit: cover;
    border-radius: 12px;
    box-shadow: var(--shadow-light);
    transition: opacity 0.5s ease-in-out; 
}

.carousel-dots {
    position: absolute;
    bottom: 15px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 8px;
}

.dot {
    width: 8px;
    height: 8px;
    background-color: rgba(255, 255, 255, 0.5);
    border-radius: 50%;
    cursor: pointer;
    transition: background-color 0.3s;
}

.dot.active {
    background-color: white;
    width: 24px;
    border-radius: 4px;
}

.tab-navigation { 
    display: flex;
    margin-bottom: 30px;
}

.tab-button {
    background: none;
    border-bottom: 3px solid var(--background-color);
    padding: 10px 20px;
    font-size: 16px;
    font-weight: 500;
    color: var(--secondary-color);
    cursor: pointer;
    position: relative;
}

.tab-button.active {
    color: var(--primary-color);
    font-weight: 500;
    border-bottom: 3px solid var(--primary-color);
}

.tab-button.active::after {
    content: '';
    position: absolute;
    left: 0;
    width: 100%;
    background-color: var(--primary-color);
}

.challenge-category {
    margin-bottom: 40px;
}

.category-header {
    display: flex;
    align-items: center;
    font-size: 1.75rem;
    font-weight: 700;
    margin-bottom: 5px;
    color: var(--primary-color);
}

.category-header i {
    width: 28px;
    height: 28px;
    margin-right: 10px;
    color: var(--primary-color);
} 

.category-description {
    color: var(--secondary-color);
    margin-bottom: 15px;
}

.challenge-grid {
    display: flex;
    flex-wrap: nowrap;
    overflow-x: scroll; 
    overflow-y: hidden; 
    gap: 20px;
    padding: 20px 0;
}

.challenge-card {
    background: linear-gradient(-130deg, #f0f3ff 0%,  #707bf2a0 97%);
    border: 1px solid #d3daff;
    border-radius: 10px;
    padding: 20px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    width: 250px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    transition: transform 0.2s, box-shadow 0.2s;
    flex-shrink: 0;
}

.challenge-grid::-webkit-scrollbar {
    display: none;
}

.challenges-section {
    width: 100%;
}

.challenge-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 16px rgba(112, 122, 242, 0.15);
}

#ongoing-placeholder {
    text-align: center;
}

.card-title {
    font-size: 1.25rem;
    font-weight: 600;
    color: #444;
    margin-bottom: 8px;
}

.card-description {
    font-size: 0.875rem;
    color: #666;
    margin-bottom: 15px;
    flex-grow: 1;
}

.start-button {
    background: var(--primary-color);
    color: white;
    padding: 8px 15px;
    border-radius: 20px;
    font-size: 0.875rem;
    font-weight: 600;
    border: none;
    cursor: pointer;
    transition: background-color 0.3s;
    width: fit-content;
}

.start-button:hover {
    background-color: #5a67d8;
}

/* Completed Challenge Card (New Style) */
.completed-challenge-card {
    background: var(--card-background);
    border-radius: 12px;
    padding: 15px;
    display: flex;
    align-items: center;
    gap: 15px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    max-width: 400px;
}

.badge-icon {
    width: 60px;
    height: 60px;
    border-radius: 8px;
    overflow: hidden;
}

.badge-icon img.grayscale {
    filter: grayscale(100%); 
}

.completed-title {
    font-size: 1.1rem;
    font-weight: 600;
    color: #333;
}

.completed-text {
    font-size: 0.9rem;
    color: var(--secondary-color);
}

.unlock-button {
    background: var(--primary-color);
    color: white;
    padding: 8px 15px;
    border-radius: 20px;
    font-size: 0.875rem;
    font-weight: 600;
    border: none;
    cursor: pointer;
    transition: background-color 0.3s;
    margin-left: auto;
}

.unlock-button:hover {
    background-color: #5a67d8;
}

.sidebar-content {
    position: fixed;
    right: 0;
    padding: 20px;
    border-radius: 12px;
    box-shadow: var(--shadow-light);
    height: fit-content;
}

.sidebar-header {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--primary-color);
    margin-bottom: 5px;
}

.sidebar-description {
    font-size: 0.9rem;
    color: var(--secondary-color);
    margin-bottom: 20px;
}

/* Top Challenge Card in Sidebar */
.top-challenge-card {
    background: linear-gradient(-130deg, #f0f3ff 0%,  #707bf2a0 97%);
    border: 1px solid #d3daff;
    border-radius: 10px;
    width: 285px;
    min-height: 120px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    padding: 12px;
    margin-bottom: 18px;
    position: relative;
}

.top-challenge-icon {
    width: 40px;
    height: 40px;
    border-radius: 8px;
    margin-right: 15px;
    object-fit: cover;
    background-color: #f0f0f0;
}

.top-challenge-card .info {
    flex-grow: 1;
}

.top-challenge-card .title {
    font-weight: 600;
    font-size: 1.25rem;
    color: #333;
}

.top-challenge-card .stats {
    font-size: 0.8rem;
    color: #707AF2;
    border: 2px solid #707bf2e8;
    border-radius: 22px;    
    width: fit-content;
    background-color: #ffffff;
    padding: 1px 10px;
    
}

.top-challenge-card .card-description {
    max-width: 200px;
    margin-top: 5px;
}

.sidebar-start-button {
    color: white;
    width: 50px;
    height: 50px;
    padding: 12px 12px;
    border-radius: 100%;
    font-size: 0.75rem;
    font-weight: 600;
    border: none;
    cursor: pointer;
    transition: opacity 0.3s;
    position: absolute;
    bottom: 10px;
    right: 10px;
}


.sidebar-start-button:hover {
    opacity: 0.9;
}

.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.4);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
}

.modal-bottom-right {
    background-color: transparent; 
    justify-content: flex-end; 
    align-items: flex-end;
    padding: 20px;
}

.modal-bottom-right .modal-content {
    margin: 0;
    animation: slideUp 0.3s ease-out; 
}

@keyframes slideUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.modal-content {
    background: white;
    border-radius: 12px;
    padding: 30px;
    position: relative;
    max-width: 380px;
    width: 90%;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
}

.modal-close-button {
    position: absolute;
    top: 15px;
    right: 15px;
    background: none;
    border: none;
    color: #999;
    cursor: pointer;
    padding: 5px;
}

.modal-close-button i {
    width: 20px;
    height: 20px;
}

/* Challenge Progress Modal Styles */
.modal-icon-container {
    width: 100px;
    height: 100px;
    margin-bottom: 20px;
    background: #e0e0e0;
    border-radius: 50%;
    padding: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    justify-self: center;
}

.modal-icon-container img {
    filter: grayscale(100%); 
}

.modal-title {
    font-size: 1.5rem;
    font-weight: 700;
    color: #333;
    margin-bottom: 5px;
}

.modal-description {
    color: #666;
    margin-bottom: 20px;
}

.modal-progress {
    width: 100%;
    display: flex;
    align-items: center;
    font-size: 0.9rem;
}

.progress-label {
    font-weight: 600;
    color: #444;
    margin-right: 15px;
}

.progress-bar-container {
    flex-grow: 1;
    height: 8px;
    background-color: #e0e0e0;
    border-radius: 4px;
    overflow: hidden;
    margin-right: 15px;
}

.progress-bar {
    height: 100%;
    border-radius: 4px;
    transition: width 0.3s ease-in-out;
}

.progress-status {
    font-weight: 600;
    color: #444;
}

/* --- Badge Unlock Modal Specific Styles --- */
.badge-content {
    padding: 40px 30px 30px 30px; /* More vertical padding for the design */
    background: linear-gradient(180deg, #F0F3FF 0%, white 100%);
    max-width: 450px;
}

.badge-modal-header {
    font-size: 1.8rem;
    font-weight: 700;
    color: var(--primary-color);
    margin-bottom: 5px;
}

.badge-modal-subheader {
    font-size: 1.1rem;
    color: #666;

}


.unlocked-badge-icon {
    width: 150px;
    height: 150px;
    object-fit: cover;
    z-index: 10;
}

.badge-modal-description {
    color: #444;
    font-size: 1rem;
    line-height: 1.5;
    margin-bottom: 30px;
}


.badge-actions {
    display: flex;
    gap: 15px;
    width: 100%;
}

.action-button {
    flex: 1;
    padding: 12px 20px;
    border-radius: 30px;
    font-weight: 600;
    font-size: 1rem;
    cursor: pointer;
    transition: all 0.2s;
}

.view-collections {
    background-color: var(--primary-color);
    color: white;
    border: 2px solid var(--primary-color);
}

.view-collections:hover {
    background-color: #5a67d8;
}

.awesome-button {
    background-color: white;
    color: var(--secondary-color);
    border: 2px solid #D0D0D0;
}

.awesome-button:hover {
    background-color: #f5f5f5;
}


/* Utility to hide/show sections */
.hidden {
    display: none;
}

/* --- Responsive Design --- */
@media (max-width: 1024px) {
    .main-layout {
        grid-template-columns: 1fr; /* Stack main content and sidebar */
    }
    .challenge-grid {
        grid-template-columns: repeat(2, 1fr); /* 2 columns on tablet */
    }
    .banner-image {
        height: 200px;
    }
    .modal-bottom-right {
        /* On mobile, center the modal instead of corner-pinning it */
        justify-content: center;
        align-items: center;
        padding: 0;
    }
}

@media (max-width: 640px) {
    .challenge-grid {
        grid-template-columns: 1fr; /* 1 column on mobile */
    }
    .main-layout {
        margin: 20px 0;
        padding: 0 10px;
    }
    .badge-confetti-container {
        width: 180px;
        height: 180px;
    }
    .unlocked-badge-icon {
        width: 120px;
        height: 120px; 
    }
}

/* Badge Modal Body - Main Container */
.badge-modal-body {
    position: relative;
    overflow: visible; /* Changed from hidden to allow confetti to show properly */
    display: flex;
    flex-direction: column;
    align-items: center;
}

/* Radial Background Animation - Behind everything */
.badge-modal-body::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: radial-gradient(circle, rgba(112, 122, 242, 0.15) 0%, rgba(112, 122, 242, 0.05) 50%, transparent 100%);
    transform: translate(-50%, -50%);
    transition: width 1.5s ease-out, height 1.5s ease-out;
    z-index: 0;
    pointer-events: none;
}

.badge-modal-body.radial-active::before {
    width: 600px;
    height: 600px;
}

/* Ensure content is above radial background */
.badge-modal-body > * {
    position: relative;
    z-index: 1;
}

/* Badge Container - Center of the modal */
.badge-confetti-container {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 300px;
    overflow: hidden;
}

/* Confetti Images - Positioned relative to badge container */
.badge-modal-body .left,
.badge-modal-body .right {
    position: absolute;
    width: 200px;
    z-index: 2;
    top: 50%;
    transform: translateY(-50%);
}

.badge-modal-body .left {
    left: -20px; /* Adjusted to be closer to the badge */
}

.badge-modal-body .right {
    right: -20px; /* Adjusted to be closer to the badge */
}

/* Badge Icon - Center of container */
.unlocked-badge-icon {
    width: 150px;
    height: 150px;
    object-fit: cover;
    position: relative;
    z-index: 3;
}

/* Text Elements Positioning */
.badge-modal-header,
.badge-modal-subheader {
    z-index: 1;
}

.badge-modal-description {
    color: #444;
    font-size: 1rem;
    line-height: 1.5;
    margin-bottom: 30px;
    z-index: 1;
}

.badge-actions {
    display: flex;
    gap: 15px;
    width: 100%;
    z-index: 1;
}

/* Hidden state for animations */
.hidden-animation {
    opacity: 0;
    visibility: hidden;
}

/* Fade In Up Animation */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.fade-in-up {
    animation: fadeInUp 0.6s ease-out forwards;
}

/* Badge Pop In Animation */
@keyframes popIn {
    0% {
        opacity: 0;
        transform: scale(0);
    }
    50% {
        transform: scale(1.1);
    }
    100% {
        opacity: 1;
        transform: scale(1);
    }
}

.pop-in {
    animation: popIn 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
}

/* Confetti Pop Animations */
@keyframes confettiPopLeft {
    0% {
        opacity: 0;
        transform: translateY(-50%) translateX(-50px) scale(0.5) rotate(-15deg);
    }
    60% {
        transform: translateY(-50%) translateX(5px) scale(1.05) rotate(5deg);
    }
    100% {
        opacity: 1;
        transform: translateY(-50%) translateX(0) scale(1) rotate(0deg);
    }
}

@keyframes confettiPopRight {
    0% {
        opacity: 0;
        transform: translateY(-50%) translateX(50px) scale(0.5) rotate(15deg);
    }
    60% {
        transform: translateY(-50%) translateX(-5px) scale(1.05) rotate(-5deg);
    }
    100% {
        opacity: 1;
        transform: translateY(-50%) translateX(0) scale(1) rotate(0deg);
    }
}

.confetti-pop-left {
    animation: confettiPopLeft 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
}

.confetti-pop-right {
    animation: confettiPopRight 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
}

/* Badge Icon Pulse Effect */
@keyframes badgePulse {
    0%, 100% {
        transform: scale(1);
    }
    50% {
        transform: scale(1.05);
    }
}

.unlocked-badge-icon.pop-in {
    animation: popIn 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards,
               badgePulse 2s ease-in-out 0.6s infinite;
}

/* Smooth transitions for all modal elements */
.badge-modal-header,
.badge-modal-subheader,
.badge-modal-description,
.badge-actions,
.badge-confetti-container,
.unlocked-badge-icon,
.badge-modal-body .left,
.badge-modal-body .right {
    transition: opacity 0.3s ease, transform 0.3s ease;
}

/* Responsive adjustments */
@media (max-width: 640px) {
    .badge-confetti-container {
        min-height: 150px;
    }
    
    .unlocked-badge-icon {
        width: 120px;
        height: 120px; 
    }
    
    .badge-modal-body .left,
    .badge-modal-body .right {
        width: 100px;
    }
    
    .badge-modal-body .left {
        left: -10px;
    }
    
    .badge-modal-body .right {
        right: -10px;
    }
}

/* Spinning Sunray Background */
.sunray-background {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 400px;
    height: 400px;
    transform: translate(-50%, -50%);
    z-index: 0;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.5s ease;
}

.sunray-background::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: conic-gradient(
        from 0deg,
        transparent 0deg,
        rgba(255, 255, 255, 0.4) 10deg,
        transparent 20deg,
        transparent 40deg,
        rgba(255, 255, 255, 0.4) 50deg,
        transparent 60deg,
        transparent 80deg,
        rgba(255, 255, 255, 0.4) 90deg,
        transparent 100deg,
        transparent 120deg,
        rgba(255, 255, 255, 0.4) 130deg,
        transparent 140deg,
        transparent 160deg,
        rgba(255, 255, 255, 0.4) 170deg,
        transparent 180deg,
        transparent 200deg,
        rgba(255, 255, 255, 0.4) 210deg,
        transparent 220deg,
        transparent 240deg,
        rgba(255, 255, 255, 0.4) 250deg,
        transparent 260deg,
        transparent 280deg,
        rgba(255, 255, 255, 0.4) 290deg,
        transparent 300deg,
        transparent 320deg,
        rgba(255, 255, 255, 0.4) 330deg,
        transparent 340deg,
        transparent 360deg
    );
    animation: rotateSunray 20s linear infinite;
}

@keyframes rotateSunray {
    from {
        transform: rotate(0deg);
    }
    to {
        transform: rotate(360deg);
    }
}

/* Show sunray when modal is active */
.badge-modal-body.radial-active .sunray-background {
    opacity: 1;
}

/* Ensure sunray is behind radial gradient */
.badge-modal-body::before {
    z-index: 1;
}

.sunray-background {
    z-index: 0;
}

/* Make sure all content is above sunray */
.badge-modal-body > *:not(.sunray-background) {
    position: relative;
    z-index: 2;
}